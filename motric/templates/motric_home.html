{% extends 'motric_moresrc.html' %}

{% block title %}All devices running on Mobile Harness{% endblock %}

{% block body %}

{% include 'motric_modal.html' %}

	<table class="table table-bordered table-hover text-center font-compacted">
	  {% csrf_token %}
	  <thead>
	  	<tr class="btn-primary">
	  	  <th>#</th>
	  	  <th>Model</th>
	  	  <th title="For Android, it's serial number; for iOS, it's unique identifier.">Device ID<img src='/static/img/question.png' style="width:21px;"></th>
	  	  <th>OS</th>
	  	  <th title='Those who have the property ownership of the device.'>Owner<img src='/static/img/question.png' style="width:21px;"></th>
	  	  <th title='Those who have the current usage access of the device. If empty, it is same as owner.'>User<img src='/static/img/question.png' style="width:21px;"></th>
	  	  <!-- <th title='Info displayed on the MobileHarness client homepage.'>Label<img src='/static/img/question.png' style="width:21px;"></th> -->
	  	  <th>Project</th>
	  	  <th class="btn-success">Requester</th>
	  	  <th title='Cost Center' class="btn-success">CC</th>
	  	  <th title='Purchase Order ID on Pivt system' class="btn-success">PO#<img src='/static/img/question.png' style="width:21px;"></th>
	  	  <th class="btn-success">Price(USD)</th>
	  	  <th class="btn-success">Price(CNY)</th>
	  	  <th class="btn-danger">Status</th>
	  	</tr>
	  </thead>
	  <tbody>
		{% for device in device_list %}
		<tr>
		  <td>{{ device.id }}</td>
		  <!-- <td>{{ device.model.all.last.model_type }}</td> {# Niubility! django's model and template #} -->
		  <td>{{ device.model }}</td>
		  <td><a href="/details/?did={{ device.device_id }}&pk={{ device.id }}" target="_blank">{{ device.device_id }}</a><button data-pk="{{ device.id }}" title="use other device to replace this" class="btn btn-xs btn-hidden" style="float:right">Replace</button></td>
		  <td><a href="#" data-target="labd_editor" data-name="os" data-title="Edit os version" data-pk="{{ device.id }}">{{ device.os}}</a></td>
		  <td><a href="#" data-target="labd_editor" data-name="owner" data-title="Edit device owner" data-pk="{{ device.id }}">{{ device.owner }}</a></td>
		  <td><a href="#" data-target="labd_editor" data-name="user" data-title="Edit device user" data-pk="{{ device.id }}">{{ device.user }}</a></td>
		  <!-- <td><a href="#" data-type="text" data-name="device_label" data-title="Change device label" data-pk="{{ device.id }}">{{ device.model.requester.device_label }}</td> -->
		  <td><a href="#" data-target="labd_editor" data-name="project" data-title="Edit project" data-pk="{{ device.id }}">{{ device.project }}</a></td>
		  <!-- <td>{{ device.model.requester.ldap }}</td> -->
		  <td>{{ device.respond_to.all.last.requester.ldap }}</td>
		  <td>{{ device.respond_to.all.last.requester.cost_center }}</td>
		  <td>{{ device.respond_to.all.first.po_number }}</td>
		  <td>{{ device.respond_to.all.first.price_usd }}</td>
		  <td>{{ device.respond_to.all.first.price_cny }}</td>
		  <td><a href="#" data-target="labd_editor" data-name="status" data-type="select" data-title="Change Status" data-pk="{{ device.id }}">{{ device.get_status_display }}</td>  {# don't use it as display() #}
		</tr>
		{% endfor %}
	  </tbody>
	</table>
{% endblock %}